<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Kite - Quilmes Kite</title>
    <!-- Bibliotecas necesarias -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/lucide-react@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; padding: 0; }
        /* Custom slider styling */
        input[type=range]::-webkit-slider-thumb { 
            -webkit-appearance: none; height: 24px; width: 24px; 
            border-radius: 50%; background: #2563eb; cursor: pointer; 
            border: 4px solid white; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); 
        }
        input[type=range]::-moz-range-thumb {
            height: 24px; width: 24px; border-radius: 50%; 
            background: #2563eb; cursor: pointer; border: 4px solid white;
        }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-transparent">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;
        const { Sun, Moon, Wind, User, ShieldCheck, Info } = LucideReact;

        const BRANDS_DATA = {
            "Cabrinha": {
                "Switchblade 2024": [{ size: 7, min: 18, max: 35 }, { size: 9, min: 13, max: 30 }, { size: 10, min: 11, max: 28 }, { size: 12, min: 9, max: 24 }],
                "Drifter": [{ size: 7, min: 20, max: 32 }, { size: 9, min: 15, max: 27 }, { size: 12, min: 11, max: 22 }],
                "Contra (Lightwind)": [{ size: 13, min: 8, max: 20 }, { size: 15, min: 7, max: 18 }, { size: 17, min: 6, max: 15 }],
                "FX": [{ size: 7, min: 20, max: 36 }, { size: 9, min: 15, max: 32 }, { size: 12, min: 11, max: 25 }]
            },
            "North": {
                "Orbit 2024": [{ size: 7, min: 19, max: 36 }, { size: 9, min: 15, max: 32 }, { size: 11, min: 12, max: 28 }, { size: 12, min: 11, max: 26 }],
                "Reach": [{ size: 7, min: 18, max: 34 }, { size: 9, min: 13, max: 28 }, { size: 12, min: 10, max: 23 }],
                "Carve (Wave)": [{ size: 7, min: 18, max: 32 }, { size: 9, min: 14, max: 28 }, { size: 12, min: 10, max: 22 }],
                "Pulse (Freestyle)": [{ size: 7, min: 20, max: 36 }, { size: 9, min: 16, max: 32 }, { size: 12, min: 12, max: 26 }],
                "Code Zero (Single Strut)": [{ size: 7, min: 14, max: 26 }, { size: 9, min: 11, max: 22 }, { size: 11, min: 9, max: 18 }]
            },
            "Duotone": {
                "Rebel SLS": [{ size: 7, min: 19, max: 36 }, { size: 9, min: 15, max: 32 }, { size: 12, min: 11, max: 24 }],
                "Evo": [{ size: 7, min: 18, max: 34 }, { size: 9, min: 14, max: 30 }, { size: 12, min: 10, max: 22 }],
                "Neo (Wave)": [{ size: 6, min: 20, max: 35 }, { size: 8, min: 16, max: 30 }, { size: 10, min: 12, max: 25 }],
                "Vegas (Freestyle)": [{ size: 7, min: 22, max: 38 }, { size: 9, min: 17, max: 33 }, { size: 12, min: 13, max: 26 }],
                "Dice": [{ size: 7, min: 19, max: 35 }, { size: 9, min: 15, max: 30 }, { size: 12, min: 11, max: 24 }],
                "Juice (Lightwind)": [{ size: 13, min: 8, max: 20 }, { size: 15, min: 7, max: 18 }, { size: 18, min: 6, max: 15 }]
            },
            "Core": {
                "XR8/XR9": [{ size: 7, min: 17, max: 35 }, { size: 9, min: 13, max: 30 }, { size: 12, min: 9, max: 23 }],
                "GTS": [{ size: 7, min: 19, max: 36 }, { size: 9, min: 15, max: 32 }, { size: 12, min: 11, max: 25 }],
                "Nexus": [{ size: 7, min: 18, max: 34 }, { size: 9, min: 14, max: 29 }, { size: 12, min: 10, max: 23 }],
                "Pace Pro": [{ size: 7, min: 21, max: 39 }, { size: 9, min: 16, max: 34 }, { size: 12, min: 12, max: 27 }]
            },
            "Flysurfer": {
                "Era2": [{ size: 7, min: 18, max: 36 }, { size: 9, min: 14, max: 31 }, { size: 12, min: 10, max: 24 }],
                "Sonic (Foil)": [{ size: 9, min: 10, max: 28 }, { size: 12, min: 8, max: 22 }, { size: 15, min: 6, max: 18 }],
                "Stoke": [{ size: 7, min: 19, max: 34 }, { size: 9, min: 15, max: 29 }, { size: 12, min: 11, max: 23 }]
            },
            "F-One": {
                "Bandit XVI": [{ size: 7, min: 20, max: 35 }, { size: 9, min: 15, max: 28 }, { size: 12, min: 10, max: 22 }],
                "Trigger": [{ size: 7, min: 19, max: 37 }, { size: 9, min: 15, max: 32 }, { size: 12, min: 11, max: 26 }],
                "WTF2 (Freestyle)": [{ size: 8, min: 18, max: 32 }, { size: 10, min: 14, max: 27 }, { size: 12, min: 12, max: 24 }],
                "Halo (Foil)": [{ size: 8, min: 10, max: 26 }, { size: 10, min: 8, max: 22 }, { size: 12, min: 7, max: 18 }]
            },
            "Naish": {
                "Pivot": [{ size: 7, min: 19, max: 34 }, { size: 9, min: 15, max: 29 }, { size: 12, min: 10, max: 23 }],
                "Boxer (Lightwind)": [{ size: 9, min: 11, max: 24 }, { size: 12, min: 9, max: 20 }, { size: 14, min: 8, max: 17 }],
                "Psycho (Big Air)": [{ size: 7, min: 20, max: 38 }, { size: 9, min: 16, max: 33 }, { size: 12, min: 12, max: 26 }],
                "Triad": [{ size: 7, min: 17, max: 32 }, { size: 9, min: 13, max: 27 }, { size: 12, min: 9, max: 22 }],
                "Torch (C-Kite)": [{ size: 7, min: 22, max: 38 }, { size: 9, min: 18, max: 34 }, { size: 12, min: 14, max: 28 }]
            }
        };

        function App() {
            const [weight, setWeight] = useState(75);
            const [wind, setWind] = useState(15);
            const [gender, setGender] = useState('Masculino');
            const [brand, setBrand] = useState('Cabrinha');
            const [model, setModel] = useState('Switchblade 2024');
            const [darkMode, setDarkMode] = useState(false);

            const SCALE_MIN = 5;
            const SCALE_MAX = 40;
            const RANGE = SCALE_MAX - SCALE_MIN;

            useEffect(() => {
                const availableModels = Object.keys(BRANDS_DATA[brand] || {});
                if (!availableModels.includes(model)) setModel(availableModels[0]);
            }, [brand]);

            const recommendation = useMemo(() => {
                const brandData = BRANDS_DATA[brand];
                if (!brandData) return { kite: null, effectiveWind: 0, status: 'Error' };
                const kites = brandData[model];
                if (!kites) return { kite: null, effectiveWind: 0, status: 'Cargando...' };
                
                const genderFactor = gender === 'Femenino' ? 0.95 : 1.0;
                const effectiveWind = wind * (75 / (weight * genderFactor));

                let bestKite = null;
                let minDiff = Infinity;
                kites.forEach(k => {
                    if (effectiveWind >= k.min && effectiveWind <= k.max) {
                        const diff = Math.abs(effectiveWind - (k.min + k.max) / 2);
                        if (diff < minDiff) { minDiff = diff; bestKite = k; }
                    }
                });

                if (!bestKite && kites.length > 0) {
                    const sorted = [...kites].sort((a, b) => b.size - a.size);
                    if (effectiveWind < sorted[0].min) bestKite = sorted[0];
                    else if (effectiveWind > sorted[sorted.length-1].max) bestKite = sorted[sorted.length-1];
                }

                return {
                    kite: bestKite,
                    effectiveWind: effectiveWind,
                    status: !bestKite ? 'Fuera de rango' : effectiveWind < bestKite.min ? 'Bajo' : (effectiveWind > bestKite.max ? 'Sobrepotenciado' : 'Ideal')
                };
            }, [weight, wind, gender, brand, model]);

            const getPos = (val) => {
                const clamped = Math.min(Math.max(val, SCALE_MIN), SCALE_MAX);
                return ((clamped - SCALE_MIN) / RANGE) * 100;
            };

            return (
                <div className={`min-h-screen transition-colors duration-300 ${darkMode ? 'bg-slate-950 text-white' : 'bg-blue-50 text-slate-900'} p-4 md:p-8`}>
                    <div className="max-w-4xl mx-auto">
                        <div className="flex justify-between items-start mb-8">
                            <div className="flex items-center gap-3">
                                <div className="bg-blue-600 p-2 rounded-lg shadow-lg"><Wind className="text-white w-8 h-8" /></div>
                                <div>
                                    <h1 className={`text-2xl font-black tracking-tighter ${darkMode ? 'text-white' : 'text-blue-900'}`}>QUILMES <span className="text-blue-500">KITE</span></h1>
                                    <p className={`text-xs font-bold uppercase tracking-widest ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Escuela de Kitesurf</p>
                                </div>
                            </div>
                            <button onClick={() => setDarkMode(!darkMode)} className={`p-3 rounded-full ${darkMode ? 'bg-slate-800 text-yellow-400' : 'bg-white text-blue-600 shadow-md'}`}>
                                {darkMode ? <Sun size={20} /> : <Moon size={20} />}
                            </button>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-12 gap-8">
                            <div className="md:col-span-5 space-y-6">
                                <section className={`p-6 rounded-3xl border ${darkMode ? 'bg-slate-900 border-slate-800' : 'bg-white border-blue-100 shadow-sm'}`}>
                                    <h2 className="text-lg font-bold mb-6 flex items-center gap-2 text-blue-500 tracking-tight"><User size={18} /> Datos del Rider</h2>
                                    <div className="space-y-8">
                                        <div>
                                            <div className="flex justify-between mb-2"><label className="text-sm font-semibold opacity-70">Peso</label><span className="text-blue-500 font-bold">{weight} kg</span></div>
                                            <input type="range" min="40" max="120" value={weight} onChange={(e) => setWeight(Number(e.target.value))} className="w-full h-2 bg-blue-100 rounded-lg appearance-none cursor-pointer accent-blue-600" />
                                        </div>
                                        <div>
                                            <div className="flex justify-between mb-2"><label className="text-sm font-semibold opacity-70">Viento real</label><span className="text-blue-500 font-bold">{wind} nudos</span></div>
                                            <input type="range" min="5" max="40" value={wind} onChange={(e) => setWind(Number(e.target.value))} className="w-full h-2 bg-blue-100 rounded-lg appearance-none cursor-pointer accent-blue-600" />
                                        </div>
                                        <div className="flex gap-2 p-1 bg-blue-50 dark:bg-slate-800 rounded-xl">
                                            {['Masculino', 'Femenino'].map(g => (<button key={g} onClick={() => setGender(g)} className={`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${gender === g ? 'bg-blue-600 text-white shadow-md' : 'opacity-50 hover:opacity-100'}`}>{g}</button>))}
                                        </div>
                                    </div>
                                </section>
                                <section className={`p-6 rounded-3xl border ${darkMode ? 'bg-slate-900 border-slate-800' : 'bg-white border-blue-100 shadow-sm'}`}>
                                    <h2 className="text-lg font-bold mb-4 flex items-center gap-2 text-blue-500 tracking-tight"><ShieldCheck size={18} /> Marca y Modelo</h2>
                                    <div className="space-y-4">
                                        <select value={brand} onChange={(e) => setBrand(e.target.value)} className={`w-full p-3 rounded-xl border appearance-none outline-none ${darkMode ? 'bg-slate-800 border-slate-700' : 'bg-blue-50 border-blue-100'}`}>
                                            {Object.keys(BRANDS_DATA).map(b => <option key={b} value={b}>{b}</option>)}
                                        </select>
                                        <select value={model} onChange={(e) => setModel(e.target.value)} className={`w-full p-3 rounded-xl border appearance-none outline-none ${darkMode ? 'bg-slate-800 border-slate-700' : 'bg-blue-50 border-blue-100'}`}>
                                            {Object.keys(BRANDS_DATA[brand] || {}).map(m => <option key={m} value={m}>{m}</option>)}
                                        </select>
                                    </div>
                                </section>
                            </div>
                            <div className="md:col-span-7 space-y-6">
                                <div className="p-8 rounded-[40px] shadow-2xl relative bg-blue-600 text-white overflow-hidden">
                                    <div className="absolute -top-20 -right-20 w-64 h-64 bg-white opacity-10 rounded-full blur-3xl"></div>
                                    <div className="relative z-10">
                                        <div className="flex justify-between items-center mb-6">
                                            <span className="text-blue-200 font-bold uppercase text-xs tracking-widest">Recomendación Quilmes Kite</span>
                                            <div className="px-3 py-1 bg-white/20 rounded-full text-xs font-bold uppercase backdrop-blur-sm">{recommendation.status}</div>
                                        </div>
                                        <div className="flex items-baseline gap-2 mb-2">
                                            <span className="text-8xl font-black">{recommendation.kite?.size || '--'}</span>
                                            <span className="text-3xl font-bold opacity-80">m²</span>
                                        </div>
                                        <p className="text-xl font-medium opacity-90 mb-8 tracking-tight italic">{brand} {model}</p>
                                        <div className="space-y-3">
                                            <div className="flex justify-between text-[10px] font-black uppercase opacity-80 px-1">
                                                <span className="text-blue-200">5 kts (Suave)</span>
                                                <span className="text-red-300 font-black">30 kts (Fuerte)</span>
                                                <span className="opacity-50">40 kts</span>
                                            </div>
                                            <div className="relative h-16 bg-blue-900/40 rounded-2xl p-2 border border-white/10 flex items-center">
                                                <div className="absolute inset-0 flex justify-between px-2 items-center pointer-events-none opacity-20">
                                                    {Array.from({ length: 36 }).map((_, i) => (<div key={i} className={`w-[1px] bg-white ${i % 5 === 0 ? 'h-3' : 'h-1'}`}></div>))}
                                                </div>
                                                {recommendation.kite && (
                                                    <div className="absolute h-10 bg-white/30 border border-white/40 rounded-lg flex items-center justify-center text-[10px] font-black transition-all duration-500 shadow-lg"
                                                        style={{ left: `${getPos(recommendation.kite.min)}%`, width: `${((recommendation.kite.max - recommendation.kite.min) / RANGE) * 100}%` }}>
                                                        RANGO {recommendation.kite.min}-{recommendation.kite.max}
                                                    </div>
                                                )}
                                                <div className="absolute top-0 bottom-0 w-[3px] bg-yellow-400 z-20 transition-all duration-500 shadow-[0_0_15px_rgba(250,204,21,0.6)]" style={{ left: `${getPos(wind)}%` }}>
                                                    <div className="absolute -top-10 left-1/2 -translate-x-1/2 bg-yellow-400 text-blue-900 text-[11px] font-black py-1 px-2 rounded-md shadow-md">{wind} Kts</div>
                                                    <div className="absolute -bottom-1 left-1/2 -translate-x-1/2 w-4 h-4 bg-yellow-400 rounded-full border-2 border-blue-600"></div>
                                                </div>
                                            </div>
                                            <div className="flex justify-between text-[9px] font-bold opacity-40 px-2">
                                                {[5, 10, 15, 20, 25, 30, 35, 40].map(v => (<span key={v} className={v === 30 ? 'text-red-300 opacity-100 font-black' : ''}>{v}</span>))}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div className={`p-5 rounded-3xl border transition-all ${darkMode ? 'bg-slate-900 border-slate-800' : 'bg-white border-blue-100 shadow-sm'}`}>
                                        <p className="text-xs font-bold opacity-50 uppercase mb-1 text-blue-500">Viento Percibido</p>
                                        <div className="flex items-center gap-2 font-black text-2xl tracking-tighter">
                                            <Wind size={20} className="text-blue-500" />
                                            {recommendation.effectiveWind.toFixed(1)} <span className="text-sm font-bold opacity-50">kts</span>
                                        </div>
                                    </div>
                                    <div className={`p-5 rounded-3xl border transition-all ${darkMode ? 'bg-slate-900 border-slate-800' : 'bg-white border-blue-100 shadow-sm'}`}>
                                        <p className="text-xs font-bold opacity-50 uppercase mb-1 text-blue-500">Seguridad</p>
                                        <div className="flex items-center gap-2 font-bold text-xs uppercase">
                                            <Info size={18} className={wind > 30 ? 'text-red-500' : 'text-green-500'} />
                                            {wind > 30 ? 'Condiciones Extremas' : (wind < 12 ? 'Viento Marginal' : 'Condiciones OK')}
                                        </div>
                                    </div>
                                </div>
                                <p className={`text-[10px] text-center opacity-40 px-6 ${darkMode ? 'text-white' : 'text-slate-900'}`}>
                                    * Cálculo basado en manuales oficiales para rider de 75kg con factor de corrección por peso. Consulta siempre a tu instructor de Quilmes Kite antes de entrar al agua.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>